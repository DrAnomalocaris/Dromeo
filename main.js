




BRAIN.setup()
const outputNeurons = ['14517691', '16393165', '10167116', '8159396', '13580849', '16586265', '8227502', '17659219', '16158918', '2557644', '9750356', '5558724', '12335381', '5478818', '19054481', '17529547', '869360', '6219445', '16057212', '10221622', '5559657', '16463097', '865151', '4116174', '17698681', '10158972', '17355872', '13968203', '3806652', '17355892', '8880781', '858479', '16884962', '7573476', '11905911', '6125806', '3732322', '15599768', '4541081', '10263287', '7589765', '12704360', '5038920', '8741619', '9761454', '15334461', '19508873', '16316981', '3009700', '13167025', '10947427', '3595837', '11261332', '10945795', '13751194', '16115575', '2655798', '5512988', '10945111', '5890323', '15250080', '3598000', '7982324', '5993765', '6114695', '11941255', '4215611', '2670619', '16571210', '9842000', '16434842', '17379420', '5956787', '5038703', '13535387', '3762787', '7571966', '5469039', '7530253', '3727026', '3727004', '5955853', '3762317', '5601924', '7529574', '2260755', '17659014', '15732050', '13191017', '5976168', '6317793', '3620633', '3764792', '19010160', '7587948', '17658978', '6446394', '12962772', '17379360', '16316973', '17543765', '17587730', '17587726', '1065967', '12030078', '17378648', '17379298', '16115255', '16347786', '15560623', '13763548', '17324711', '14034206', '13081886', '5993001', '13645610', '17537254', '7982307', '5996485', '16154290', '17304269', '5010581', '9234420', '3027876', '16195633', '15548844', '18232369', '13764822', '7590264', '2669844', '5500958', '2283495', '15202263', '11639192', '2852273', '17352470', '3414508', '2659386', '13793212', '3561724', '6554358', '5869204', '3436420', '2357110', '7569260', '2355126', '13535380', '15894278', '5319633', '17647621', '16388736', '18464581', '13557064', '18604097', '13760954', '15934458', '13652117', '14039007', '19190681', '17380345', '6156152', '5052370', '16950798', '12474164', '17877682', '14588375', '17656886', '5995125', '13646473', '13007383', '17587734', '15672263', '15964206', '17589475', '17025508', '17639824', '6154200', '5900426', '12026822', '16950767', '6154921', '2648254', '16950443', '6155577', '20911955', '13842372', '6700147', '17654514', '20911961', '17654519', '5794678', '13727202', '15894178', '16520950', '16950550', '6702943', '16950354', '16339338', '8496618', '6153877', '13380660', '17062823', '17814107', '3539170', '17740547', '13313410', '4991243', '17732291', '17355745', '17356454', '12000033', '3797420', '18440675', '3486867', '17351780', '11229136', '17359133', '9842383', '13830600', '17728571', '17423125', '17728605', '17359101', '10865025', '1924051', '11105182', '17356450', '11195708', '14437742', '16588928', '17223685', '8154054', '11007420', '10527147', '10915553', '17732270', '19470184', '992646', '8216541', '17951049', '13422280', '3928652', '5688091', '8755914', '3814701', '17732791', '18527962', '13833814', '3048606', '16424131', '5764924', '10716080', '3882998', '15588711', '4400767', '7227010', '10728323', '15365184', '5763407', '3928574', '9795662', '10728318', '5684940', '8391330', '10609443', '9787859', '17321919', '6604203', '17473163', '9372642', '3928522', '10411574', '16683883', '2138427', '10563755', '7476468', '15639294', '4874953', '16683943', '3926669', '3926438', '3925724', '3729496', '5615961', '3926904', '10418394', '16713227', '3944330', '9787592', '14034311', '3044500', '3946166', '5754346', '5690425', '8047280', '5680013', '5462159', '14539753', '10018161', '17359111', '18123575', '18305433', '4110483', '17102002', '17354403', '17732346', '10018150', '8723983', '17732334', '16928740', '17359501', '17087885', '13749806', '6572414', '11217208', '16676038', '19298644', '1980134', '7130033', '19298625', '11009492', '4188290', '17728922', '9424902', '3944626', '15522152', '16340977', '8357933', '7005145', '15897280', '7335439', '4453485', '3281684', '10059655', '4506509', '7338309', '3498479', '4523584', '4523803', '10329208', '17776982', '6978585', '6445994', '12634154', '7005184', '3046503', '10459723', '16562142', '17053270', '18485293', '10921106', '10728328', '10728333', '17353986', '14651659', '7439913', '16561660', '17075832', '17358891', '20139548', '1622901', '16952691', '16851577', '17022668', '13736919', '18058793', '17732256', '17732311', '16675987', '18305476', '18695745', '17777031', '17736755', '11013583', '20556072', '17736748', '16952671', '16952648', '7955278', '16852622', '16952665', '10756813', '16670540', '16952642', '17736641', '17358864', '18929470', '18076102', '17736654', '17809869', '3979181', '17165755', '15005403', '16667306', '16667592', '16561224', '19361427', '16851496', '10553248', '1678567'];
const inputNeurons = ['2532841', '16267292', '2544902', 'no pair', 'no pair', 'no pair', 'no pair', 'no pair', 'no pair', '7566199', 'no pair', '1856512', '8447845', '946481', '902038', '900032', 'no pair', 'no pair', '3827211', '3790004', '3963891', '3840345', '4073353', '3885215', '3958234', '2608843', '3980315', '3893195', '2582391', '3985829', '3813723', '7719547', '7658146', '2584838', '4023881', '4076389', '3954014', '3896629', '3865952', '2571761', '3872653', '15746421', '15595950', '3966683', '15652529', '15556868', '15615042', '15588691', '15556081', '15615589', '18625446', '15595607', '15589411', '15653288', '15522777', '15653432', '9853425', '15609885', '3199456', '15736147', '12253020', '15506094', '15592696', '15507888', '16341399', '15588800', '10934438', '4097554', '15595823', '3071301', '4017089', '15651438', '3822523', '15589362', '15656435', '15615081', '15615776', '4096703', '15409328', '3487306', '18630153', '15541976', '15639171', '15531033', '15640893', '15530882', '15531916', '15525858', '16341507', '15573283', '16341966', '15458316', '15434200', '18620885', '15398807', '5448622', '3795498', '15461769', '15451084', '15573331', '15639020', '3650600', '3123905', '15658013', '7160160', '15641926', '15533421', '8810739', '15547732', '16115501', '15645825', '15653927', '15762568', '15615475', '15620606', '15629241', '18679889', '15594123', '15505837', '15672153', '15639275', '15618976', '15637893', '15671848', '15638520', '15620432', '15743905', '16362243', '766246', '902877', 'no pair', 'no pair', '7778722', '7485368', 'no pair', 'no pair', '4059758', '15640548', '4030526', '15748726', '15542354', '15638742', '15576194', '15564911', '15617459', '15640425', '15574508', '15575052', '15607180', '15575232', '18833414', '15639548', '15612241', '15640567', '15914721', '15618756', '15572414', '15564782', '15672957', '15671481', '15615877', '3562954', '15445198', '945309', '15609427', '18785124', '15629355', '15611642', '15611791', '3192952', '15567466', '15638968', '18231999', '15587166', '15564882', '15564661', '17951153', '15546924', '15569561', '10852875', '15561413', '15574328', '15548694', '9716858', '15563553', '15562137', '6883831', '891237', '15573450', '11291344', '15586536', '15573381', '15564807', '15575327', '4061049', '12178825', '5382876', '15543394', '15640724', '7331555', '19037563', '7627878', '2552701', '7555204', '7568455', '15610387', '15564706', '15574941', '9748269', '15615305', '15606918', '15532105', '16442344', '15543068', '9503203', '15541944', '10868477', '15574199', '3556191', '10963761', '5638694', '15548107', '15559195', '15573396', '15574231', '15508735', '2340336', '2456826', '15542199', '8199012', '15629888', '15594038', '4044654', '15508475', '15605657', 'no pair', 'no pair', 'no pair', '2216445', '2216131', '10241716', '2215622', '2215447', '2215247', 'no pair', '2206279', 'no pair', 'no pair', 'no pair', 'no pair', 'no pair', '37365', '2200028', '3464773', '6791927', '3716797', '3465659', '7527710', '7542938', '3511996', '3410499', '3774568', '3410506', '2611805', '2610744', '5090549', '3158543', '3771794', '3768025', '5093516', '6340439', '40045', '3694515', '3592997', '3547397', '3708875', '15716934', '15714639', '3586984', '4338596', '15716701', '15690093', '15689373', '15674262', '12260696', '15679577', '15938337', '15681740', '15677323', '11671564', '11745381', '5186461', '18934019', '3054101', '15716309', '12073881', '15995929', '15997645', '15997692', '15715643', '15688358', '15680093', '5088293', '11736972', '15716127', '5116147', '15673867', '3652587', '15716094', '15677030', '15686512', '15673925', '5120097', '15590761', '3609202', '3639968', '1706716', '16288872', '7439909', '7556564', '15998817', '15998782', '15998768', '15998469', '15998307', '15998218', '15998100', '15997983', '15997929', '15997807', '8055671', '15996518', '15995404', '15998261', '1715990', '15717736', '3608397', '15717935', '9808022', '1347886', '15723727', '15996160', '15717426', '1427012', '5057916', '15718275', '15715151', '15690711', '15714845', '15712024', '15717229', '15711289', '15698623', '15996271', '15727304', '15725545', '15678849', '15725127', '15724636', '15724520', '15713374', '15700147', '17608754', 'no pair', 'no pair', '2216187', '7480731', 'no pair', 'no pair', '7483922', '2209091', '5116861', '15723479', '5095269', '15995327', '17380936', '15714330', '15994926', '1351125', '15690955', '3032520', 'no pair', 'no pair', '15711222', '1419315', '15699715', '3050645', '3267019', '15728017', '15730645', '15730680', '1428271', '1432836', '3036249', '15714173', '15675901', '15678833', '15995861', '1415168', '19180425', '15725673', '15680710', '15678441', '15674083', '15998753', '15984231', '15724385', '15766999', '15983225', '7424178', '15984797', '15770945', '1435466', '15982306', '8005609', '1400725', '9820270', '1405493', '1431256', '1392771', '1377586', '1375101', '19120772', '1406463', '3795424', '9838294', '1391179', '1414206', '15769680', '7012280', '16911458', '4363883', '15770904', '15724175', '7340629', '19017854', '16303262', 'no pair', 'no pair', 'no pair', '15679484', 'no pair', 'no pair', 'no pair', '15690392', '15715796', '1709802', '15983156', '1429969', '9835169', '1011675', '11874130', '1398253', '15770032', '5617164', '3915835', '15769419', '1367171', '40152', '1395971', '15997666', '13744425', '2284021', 'no pair', 'no pair', '15713206', '15998319', '5120990', '15998913', '15998899'];


// Create a box for each post-synaptic neuron
print("setting up connectome html")
for (var ps in BRAIN.connectome) {
	var newBox = document.createElement('span');
	newBox.id = ps;
	newBox.className = 'brainNode';
	document.getElementById('nodeHolder').appendChild(newBox);
  if (inputNeurons.includes(ps)){
      newBox.classList.add('inputNeurons')   
      document.getElementById('inputHolder').appendChild(newBox);

  }else if (outputNeurons.includes(ps)){
      newBox.classList.add('outputNeurons')
      document.getElementById('outputHolder').appendChild(newBox);

  }else{
    newBox.classList.add('interNeurons')
    document.getElementById('interHolder').appendChild(newBox);
  }

}
print("set up connectome html")

/**
 * Updates the brain of the worm.
 * This function updates the brain's state, updates the visual representation of the post-synaptic connections,
 * calculates the new direction and speed of the worm based on the accumulated left and right inputs.
 */

function updateBrain() {
  BRAIN.update();
	for (var postSynaptic in BRAIN.connectome) {
		var psBox = document.getElementById(postSynaptic);
		var neuron = BRAIN.postSynaptic[postSynaptic][BRAIN.thisState];

		psBox.style.opacity = Math.min(1, (neuron / 50)+.2);
	}
	//let scalingFactor = 20;
	//let newDir = (BRAIN.accumleft - BRAIN.accumright) / scalingFactor;
	//targetDir = facingDir + newDir * Math.PI;
	//targetDir = facingDir + calculateFinalDirection(BRAIN.accumleft/200, BRAIN.accumright/200);
	//targetSpeed =
	//	(Math.abs(BRAIN.accumleft) + Math.abs(BRAIN.accumright)) /
	//	(scalingFactor * 5);
	//speedChangeInterval = (targetSpeed - speed) / (scalingFactor * 1.5);
}
BRAIN.neuronsToActicate['R_olfactory_1'] = true;

BRAIN.randExcite();
setInterval(updateBrain, 500);